# 実装タスクリスト

- [x] 1. GASプロジェクトのセットアップとコア関数の実装





  - GASプロジェクトの基本構造を作成
  - PropertiesServiceを使用したタスク番号管理機能を実装
  - _Requirements: 10.1, 10.2, 10.3, 10.4, 10.5_

- [x] 1.1 タスク番号管理関数の実装


  - `getTaskNumber()` 関数を実装してPropertiesServiceからタスク番号を取得
  - `incrementTaskNumber()` 関数を実装してタスク番号を更新
  - タスク番号が存在しない場合のデフォルト値（1）処理を実装
  - _Requirements: 10.1, 10.2, 10.3, 10.4_


- [x] 1.2 タスク名解析関数の実装

  - `parseTaskName()` 関数を実装して親子タスクを判定
  - `>` および `＞` で始まるタスクを子タスクとして認識
  - 子タスク名から先頭記号を除去する処理を実装
  - _Requirements: 5.1, 5.2, 5.5_


- [x] 1.3 日付計算関数の実装

  - `calculateEventDates()` 関数を実装してイベント日程を計算
  - 期限が空欄または過去の場合は本日のみのイベントとする処理
  - 期限が未来の場合は（期限-4日）と本日の遅い方を開始日とする処理
  - 排他エンド形式での終了日設定
  - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [x] 2. Google Docs連携機能の実装




  - Google Docsファイル作成機能を実装
  - フォルダ管理機能を実装
  - _Requirements: 6.1, 6.2, 6.3, 6.4, 6.5_

- [x] 2.1 Docsファイル作成関数の実装


  - `createDocsFile()` 関数を実装してGoogle Docsファイルを作成
  - 「Tsk タスク管理」フォルダへの配置処理を実装
  - フォルダが存在しない場合の自動作成処理を実装
  - Docsファイルへの内容書き込み処理を実装
  - エラーハンドリングを実装（エラー時はnullを返す）
  - _Requirements: 6.1, 6.2, 6.3, 6.5_

- [x] 3. カレンダーイベント作成機能の実装





  - カレンダーイベント作成処理を実装
  - イベントタイトルとDescriptionの生成処理を実装
  - _Requirements: 3.1, 3.2, 3.4, 7.1, 7.2, 7.3, 7.4_

- [x] 3.1 イベントタイトル生成処理の実装


  - 「Tkk-xxxx タスク名」形式のタイトル生成処理を実装
  - 子タスクの場合は「Tkk-xxxx 子タスク名@親タスク名」形式を実装
  - 4桁ゼロ埋めのタスク番号フォーマット処理を実装
  - _Requirements: 3.2, 5.2, 7.1, 10.5_

- [x] 3.2 イベントDescription生成処理の実装


  - 子タスクの場合は「親タスク: (親タスク名)」を追加
  - タスク詳細をDescriptionに含める処理を実装
  - 3,500文字制限と超過時の切り捨て処理を実装
  - _Requirements: 5.3, 7.2, 7.3, 7.4_

- [x] 3.3 カレンダーイベント作成処理の実装


  - `createAllDayEvent()` を使用した終日イベント作成処理を実装
  - DocsファイルURLをイベントの「場所」欄に設定する処理を実装
  - 指定されたカレンダーID（9dsoil5r12um5nojs5qp1hun0g@group.calendar.google.com）への作成処理を実装
  - _Requirements: 3.4, 4.4, 6.4_
-

- [x] 4. メイン処理関数の実装




  - タスクリスト全体を処理する`processTaskList()` 関数を実装
  - エラーハンドリングと処理結果の返却処理を実装
  - _Requirements: 3.1, 3.5, 9.2, 9.3_


- [x] 4.1 タスクループ処理の実装

  - タスク配列をループして各タスクを処理
  - 空のタスク名をスキップする処理を実装
  - 親タスク名の追跡処理を実装
  - タスク番号のインクリメント処理を実装
  - _Requirements: 3.1, 5.4_

- [x] 4.2 処理時間計測と結果返却の実装

  - 処理開始時刻と終了時刻の記録処理を実装
  - 所要時間の計算処理を実装
  - 成功/失敗を含む処理結果オブジェクトの返却処理を実装
  - _Requirements: 3.5, 9.2_

- [x] 4.3 エラーハンドリングの実装

  - try-catchによる例外処理を実装
  - エラーメッセージの生成と返却処理を実装
  - ログ出力処理を実装
  - _Requirements: 9.3_

- [x] 5. HTML UIの基本構造の実装





  - index.htmlファイルを作成
  - Bootstrap、htmx、Alpine.jsのCDN読み込みを実装
  - レスポンシブデザインの基本レイアウトを実装
  - _Requirements: 1.1, 1.2, 1.4_

- [x] 5.1 HTMLヘッダーとCDN読み込みの実装


  - HTML5ドキュメント構造を作成
  - Bootstrap 5のCSSとJSをCDN経由で読み込み
  - htmxライブラリをCDN経由で読み込み
  - Alpine.jsライブラリをCDN経由で読み込み
  - ビューポート設定とレスポンシブメタタグを追加
  - _Requirements: 1.2, 1.4_


- [x] 5.2 基本レイアウトとコンテナの実装

  - Bootstrapコンテナを使用したメインレイアウトを作成
  - ヘッダーセクションを実装
  - フォームセクションのコンテナを実装
  - _Requirements: 1.4_

- [x] 6. タスク入力フォームの実装





  - Alpine.jsを使用した動的フォームを実装
  - タスク行の追加・削除機能を実装
  - _Requirements: 2.1, 2.2, 2.3, 2.4_

- [x] 6.1 Alpine.jsデータストアの実装


  - `taskApp()` 関数を実装してタスク配列を管理
  - 初期タスク行のデータ構造を定義
  - loading、messageなどの状態変数を定義
  - _Requirements: 2.4_


- [x] 6.2 タスク入力フィールドの実装

  - タスク名入力フィールド（テキスト）を実装
  - 期限日付選択フィールド（date型）を実装
  - タスク詳細入力フィールド（textarea）を実装
  - Alpine.jsのx-modelでデータバインディングを実装
  - _Requirements: 2.1, 2.2, 2.3_

- [x] 6.3 動的行追加・削除機能の実装

  - 「行を追加」ボタンとaddTask()関数を実装
  - 「削除」ボタンとremoveTask()関数を実装
  - x-forディレクティブを使用した動的レンダリングを実装
  - _Requirements: 2.4_

- [x] 7. アクションボタンとUI制御の実装





  - 処理開始ボタンとリストをクリアボタンを実装
  - ローディングインジケーターとメッセージ表示を実装
  - _Requirements: 3.1, 8.1, 8.2, 8.3, 9.1, 9.2, 9.3, 9.4_

- [x] 7.1 処理開始ボタンの実装


  - 「処理開始！」ボタンを実装
  - htmxを使用したPOSTリクエスト送信処理を実装
  - フォームデータのシリアライズ処理を実装
  - _Requirements: 3.1, 9.1_

- [x] 7.2 リストをクリアボタンの実装

  - 「リストをクリア」ボタンを実装
  - clearTasks()関数を実装してすべての入力をクリア
  - _Requirements: 8.1, 8.2_


- [x] 7.3 ローディングインジケーターの実装


  - Bootstrapスピナーを使用したローディング表示を実装
  - Alpine.jsのx-showディレクティブで表示制御を実装
  - 処理開始時にloadingフラグをtrueに設定
  - _Requirements: 9.1_



- [x] 7.4 メッセージ表示の実装

  - 処理結果メッセージの表示エリアを実装
  - 成功時とエラー時で異なるスタイルを適用
  - 2秒後に自動的にメッセージを消す処理を実装
  - _Requirements: 9.2, 9.3, 9.4_

- [x] 8. GASとフロントエンドの連携実装





  - doGet()関数を実装してHTML UIを提供
  - htmxからのPOSTリクエストを処理する仕組みを実装
  - _Requirements: 1.1, 3.1_

- [x] 8.1 doGet()関数の実装


  - HtmlServiceを使用してindex.htmlを返す処理を実装
  - タイトルとXFrameOptionsの設定を実装
  - _Requirements: 1.1_


- [x] 8.2 フロントエンドからのデータ受信処理の実装

  - htmxからのPOSTリクエストを受け取る処理を実装
  - フォームデータをパースしてタスク配列に変換
  - processTaskList()関数を呼び出して処理を実行
  - 処理結果をJSON形式で返却
  - _Requirements: 3.1_

- [x] 9. スタイリングとUI改善





  - Bootstrapを使用したスタイリングを実装
  - レスポンシブデザインの調整を実装
  - ユーザビリティの向上
  - _Requirements: 1.4_


- [x] 9.1 フォームスタイリングの実装

  - Bootstrapフォームクラスを適用
  - グリッドレイアウトでフィールドを配置
  - 入力フィールドのプレースホルダーを追加
  - _Requirements: 1.4_


- [x] 9.2 ボタンスタイリングの実装


  - Bootstrapボタンクラスを適用
  - 処理開始ボタンを目立つ色（primary）に設定
  - リストをクリアボタンをセカンダリ色に設定
  - 削除ボタンを危険色（danger）に設定
  - _Requirements: 1.4_


- [x] 9.3 レスポンシブ対応の実装


  - モバイル画面でのレイアウト調整
  - タブレット画面でのレイアウト調整
  - Bootstrapのグリッドシステムを活用
  - _Requirements: 1.4_

- [x] 10. デプロイと初期設定





  - GASプロジェクトをWebアプリとしてデプロイ
  - 権限の承認と初期設定を実施
  - _Requirements: 1.1, 1.3_

- [x] 10.1 Webアプリデプロイの実施


  - GASプロジェクトを「Webアプリ」としてデプロイ
  - 実行ユーザーとアクセス権限を設定
  - デプロイURLを取得
  - _Requirements: 1.1_


- [x] 10.2 API権限の承認

  - Calendar APIの権限を承認
  - Drive APIの権限を承認
  - Docs APIの権限を承認
  - _Requirements: 1.3_

- [ ]* 10.3 動作確認テストの実施
  - 単一タスクの作成テスト
  - 複数タスクの作成テスト
  - 親子タスクの作成テスト
  - 期限日パターンのテスト
  - エラーハンドリングのテスト
  - _Requirements: すべて_
